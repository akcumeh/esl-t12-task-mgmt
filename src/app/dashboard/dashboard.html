<div class="dashboard-container">
    <div class="header">
        <h1>Task Management</h1>
        <button mat-fab color="primary" (click)="navigateToAddTask()" class="add-button">
            <mat-icon>add</mat-icon>
        </button>
    </div>

    <div class="task-columns">
        <div class="column">
            <h2>New Task</h2>
            <div cdkDropList
                 [cdkDropListData]="newTasks()"
                 [cdkDropListConnectedTo]="['progress-list', 'done-list']"
                 id="new-list"
                 (cdkDropListDropped)="drop($event)">
                @for (task of newTasks(); track task.id) {
                <div cdkDrag class="task-card">
                    <div class="task-content">
                        <h3>{{ task.title }}</h3>
                        <p>{{ task.description }}</p>
                    </div>
                </div>
                }
            </div>
        </div>

        <div class="column">
            <h2>In Progress</h2>
            <div cdkDropList
                 [cdkDropListData]="progressTasks()"
                 [cdkDropListConnectedTo]="['new-list', 'done-list']"
                 id="progress-list"
                 (cdkDropListDropped)="drop($event)">
                @for (task of progressTasks(); track task.id) {
                <div cdkDrag class="task-card">
                    <div class="task-content">
                        <h3>{{ task.title }}</h3>
                        <p>{{ task.description }}</p>
                    </div>
                </div>
                }
            </div>
        </div>

        <div class="column">
            <h2>Done</h2>
            <div cdkDropList
                 [cdkDropListData]="doneTasks()"
                 [cdkDropListConnectedTo]="['new-list', 'progress-list']"
                 id="done-list"
                 (cdkDropListDropped)="drop($event)">
                @for (task of doneTasks(); track task.id) {
                <div cdkDrag class="task-card completed">
                    <div class="task-content">
                        <h3>{{ task.title }}</h3>
                        <p>{{ task.description }}</p>
                    </div>
                </div>
                }
            </div>
        </div>
    </div>
</div>